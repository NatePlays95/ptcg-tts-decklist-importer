<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="everything-wrapper">
        <div class="deck-name-wrapper">
            <label>Deck Name</label>
            <input id="deck-name">
        </div>
        <div class="deck-list-wrapper">
            <label>Deck List</label>
            <textarea name="deck-list" id="deck-list" cols="30" rows="10"></textarea>
        </div>

        <div class="buttons-wrapper">
            <button class="generate-button">CREATE DECK!</button>
        </div>

        <div class="img-wrapper">
            <div id="hidden-div" style="display: none; width: 100%; height: 100%;">
                <center>
                    <img src="deck_list.png" id="export-image" alt="deck_list">
                </center>
            </div>
        </div>

        <div>
            <label>Deck ready</label>
            <p>Just save it!</p>
        </div>
        
    </div>
</body>
</html>
<script type="text/javascript" src="/eel.js"></script>
<script type="text/javascript">
    eel.expose(say_hello_js); // Expose this function to Python
    function say_hello_js(x) {
      console.log("Hello from " + x);
    }

    eel.say_hello_py("Javascript World!"); // Call a Python function

    const input = document.getElementById("deck-name")
    const textarea = document.getElementById("deck-list");
    
    const generate_button = document.getElementsByClassName("generate-button")[0];
    generate_button.onclick = async function() {
        let n = await eel.handle_deck_list(textarea.value)();
        on_deck_finished();
    }

    eel.expose(on_deck_finished);
    function on_deck_finished() {
        let hidden_div = document.getElementById('hidden-div')
        hidden_div.style.display = "block" 
        let image =  document.getElementById('export-image')
        image.src = "deck_list.png#" + new Date().getTime();
    }

</script>